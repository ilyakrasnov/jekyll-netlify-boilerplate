---
layout: post
title: שנצליח
author: dan_urbanowicz
date: '2019-04-09 20:11:57'
intro_paragraph: והפעם- בואו נדבר על ```pivot table```
categories: ''
---
**הבעיה שלנו היא ש...**

כולנו מכירים את האפשרות המדהימה באקסל ליצור `pivot table`. ב-`MySql` בניגוד ל-`Databases` אחרים אין את הפקודה `Pivot`, אז איך נוכל לעשות את זה בכל זאת? 

**הטיפ שלי**

סוד ההצלחה במקרה הזה טמון בפונקציות אגרגציה על מקרים של `case`. כלומר, נבחר איזה אגרגציה אנחנו רוצים לעשות ועל איזה מקרה.

{% gist 79f97eee6395fc987f3fcd6dcc02628f %}
**בואו ננסה את זה בפועל**

הטבלה שלנו: 

orders:

| orderID | customerID | orderDate | orderDelievered | amount |
|---------|------------|-----------|-----------------|--------|
| 1       | 1          | 28.7.2019 | 0               | 500    |
| 2       | 1          | 28.6.2019 | 0               | 200    |
| 3       | 1          | 28.3.2019 | 1               | 1500   |
| 4       | 1          | 11.1.2019 | 0               | 300    |
| 5       | 2          | 7.5.2019  | 0               | 350    |
| 6       | 2          | 13.1.2019 | 1               | 200    |
| 7       | 2          | 2.2.2019  | 1               | 20     |
| 8       | 2          | 6.4.2019  | 0               | 600    |

הפקודות שנבצע

{% gist 6ac801631adc02753892a9a0f0b48aee %}

תוצאה:

| customerID | HighestUndeliverdOrder | HighestDeliverdOrder |
|------------|------------------------|----------------------|
| 1          | 500                    | 1500                 |
| 2          | 600                    | 200                  |


נוצרה לנו טבלה חדשה המציגה עבור כל לקוח את ההזמנה הכי יקרה שלא סופקה עבורו ו את ההזמנה הכי יקרה שסופקה.


והברכה שלי אליכם..

