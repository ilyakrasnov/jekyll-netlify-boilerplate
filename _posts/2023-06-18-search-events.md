---
layout: post
title: Search Events
author: shiran
date: 2023-06-16 07:51:45
intro_paragraph: " והפעם- בואו נדבר על איוונטים של Search bar"
tags: SQL
image: uploads/agr.jpg
---
***הבעיה שלנו היא ש...***

כ﻿שיש לנו search bar הרבה פעמים האיוונט נוצר אחרי כמה שניות הפסקה אחרי הקלדה, מה שגורם הרבה פעמים לחצאי מילים או משפטים.
אנחנו רוצים להראות לאנשי הפרודקט מה משתמשים חיפשו (מילים או משפטים שלמים)

***הטיפ שלי***



{% gist db9675e06002bf7f686ba3b09c58f65f %}

***בואו ננסה את זה בפועל***
ל﻿דוגמה, כאשר משתמש מחפש "How to add member" האיוונטים שלנו יראו כך
הטבלה שלנו:

| created_at       | name                          | account_id | user_id | info1 |
|------------------|-------------------------------|------------|---------|-------|
| 2022-01-01 12:00 | action_bar_enter_search_input | 1          | 1A      | H     |
| 2022-01-01 12:01 | action_bar_enter_search_input | 1          | 1A      | HO    |
| 2022-01-01 12:02 | action_bar_enter_search_input | 1          | 1A      | HOW   |


***אפשרות אחת – אגרגציה על אגרגציה***

הפקודות שנבצע:

{% gist 65de4353baa5b639bda7d01f64e5c4d6 %}

תוצאה:

| city  | sum(revenues)|
|---|---|
|'EILAT' | '35500'|
|' JERUSALEM'' | '76500'| 
|'TEL AVIV ' | '250000'| 
| NULL | '362000'| 


סך הכל הרווחנו בכל הערים ובכל השנים 362,000 ש״ח.

***אפשרות שניה – אגרגצית ביניים***

הפקודות שנבצע:

{% gist 5d8f65e2a4f35217fd2d3d39271bc75b %}

תוצאה:

| city  | year  |  sum(revenues) |
|---|---|---|
|'EILAT'|'2015'|'20000'|
|'EILAT'|'2016'|'10500'|
|'EILAT'|'2017'|'5000'|
|'EILAT'|NULL|'35500'|
|'JERUSALEM'|'2017'|'76500'|
|'JERUSALEM'|NULL|'76500'|
|'TEL AVIV'|'2015'|'100000'|
|'TEL AVIV'|'2016'|'150000'|
|'TEL AVIV'|NULL|'250000'|
|NULL|NULL|'362000'|


ניתן לראות סיכום עבור כל עיר בנפרד. כך שסך הכל הרווחנו בכל השנים 
באילת 35,500 ש״ח, בירושלים 76,500 ש״ח, בתל אביב 250,000. 
וסיכום עבור כל הערים יחד, סך הכל עבור כל הערים בכל השנים הרווחנו 362,000 ש״ח.
 


