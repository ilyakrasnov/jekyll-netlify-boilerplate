---
layout: post
title: שנאמין
author: shiran
date: '2019-08-01 15:59:33'
intro_paragraph: והפעם- בואו נדבר על טעינת קבצים כאשר חלק מהערכים ריקים
---

הבעיה שלנו היא ש...

במקרים רבים של טעינת ערכים לטבלה מתוך קובץ נתקל בשגיאה כיוון שחלק מהערכים בקובץ המקורי ריקים (ואינם מסומנים ב-0 או NULL).

הטיפ שלי
תאמינו, זה אפשרי ופשוט!
נשתמש בהגדרת העמודות בעלות הערכים הריקים כמשתנים ואז נשתמש ב-()ifnull כדי להתגבר על הבעיה.


create table table_name (
column1 type,
column2 type,
column3 type,
column4 type,
column5 type) engine=myisam

LOAD DATA infile 'file_address.txt'
INTO TABLE table_name
character set utf8
fields terminated BY ','
optional enclosed by '"'
escaped by '"'
lines terminated BY '\r\n'
(column1, @column2, @column3, column4, @column5)

SET
column2 = nullif(@column2,0),
column3 = nullif(@column3,0),
column5 = nullif(@column5,0)
ignore 1 lines;

בואו ננסה את זה בפועל:

הטבלה שלנו:





הפקודות שנבצע:

{% gist f6b4e023e87a56acfabffb06d89c4757 %}
תוצאה:
הטבלה נטענת בהצלחה.


והברכה שלי אליכם

![](/assets/img/uploads/שנאמין.jpg)
